import pytest
import os
import requests
from better_than_this.external.yelp_client import get_restaurant, get_better_restaurants

yelp_response = {'region': {'center': {'longitude': -73.99429321289062, 'latitude': 40.70544486444615}}, 'total': 300, 'businesses': [{'display_phone': '(718) 381-8201', 'distance': 6028.260197370216, 'url': 'https://www.yelp.com/biz/faro-brooklyn?adjust_creative=VgYdbrJG3V8WxnE29HVmwQ&utm_campaign=yelp_api_v3&utm_medium=api_v3_business_search&utm_source=VgYdbrJG3V8WxnE29HVmwQ', 'transactions': [], 'phone': '+17183818201', 'id': 'clOFor0bFSjse7EUfdRacg', 'image_url': 'https://s3-media4.fl.yelpcdn.com/bphoto/uE_e7ROScbFLYLN2TVVViQ/o.jpg', 'categories': [{'title': 'Italian', 'alias': 'italian'}], 'name': 'Faro', 'is_closed': False, 'review_count': 241, 'location': {'address3': '', 'display_address': ['436 Jefferson St', 'Brooklyn, NY 11237'], 'address1': '436 Jefferson St', 'state': 'NY', 'city': 'Brooklyn', 'address2': '', 'country': 'US', 'zip_code': '11237'}, 'rating': 4.0, 'coordinates': {'longitude': -73.922839, 'latitude': 40.707407}, 'alias': 'faro-brooklyn', 'price': '$$$'}, {'display_phone': '(718) 623-2767', 'distance': 3748.568098966837, 'url': 'https://www.yelp.com/biz/faros-restaurant-brooklyn-4?adjust_creative=VgYdbrJG3V8WxnE29HVmwQ&utm_campaign=yelp_api_v3&utm_medium=api_v3_business_search&utm_source=VgYdbrJG3V8WxnE29HVmwQ', 'transactions': ['pickup'], 'phone': '+17186232767', 'id': 'd5i5NvBcah7zX0Z5nK5BHA', 'image_url': 'https://s3-media2.fl.yelpcdn.com/bphoto/XJC15_1jOfvVyAJ906q81Q/o.jpg', 'categories': [{'title': 'Greek', 'alias': 'greek'}, {'title': 'Mediterranean', 'alias': 'mediterranean'}], 'name': 'Faros Restaurant', 'is_closed': False, 'review_count': 196, 'location': {'address3': '', 'display_address': ['84 7th Ave', 'Brooklyn, NY 11217'], 'address1': '84 7th Ave', 'state': 'NY', 'city': 'Brooklyn', 'address2': '', 'country': 'US', 'zip_code': '11217'}, 'rating': 4.0, 'coordinates': {'longitude': -73.97532, 'latitude': 40.6749}, 'alias': 'faros-restaurant-brooklyn-4', 'price': '$$'}, {'display_phone': '(718) 381-2699', 'distance': 6637.859284384223, 'url': 'https://www.yelp.com/biz/nicandras-brooklyn?adjust_creative=VgYdbrJG3V8WxnE29HVmwQ&utm_campaign=yelp_api_v3&utm_medium=api_v3_business_search&utm_source=VgYdbrJG3V8WxnE29HVmwQ', 'transactions': [], 'phone': '+17183812699', 'id': 'RtfjlBlSUizdQp9_k3_wHg', 'image_url': 'https://s3-media2.fl.yelpcdn.com/bphoto/ZvDpe27ziHN-3ArGUdBlXw/o.jpg', 'categories': [{'title': 'Breakfast & Brunch', 'alias': 'breakfast_brunch'}, {'title': 'Pasta Shops', 'alias': 'pastashops'}], 'name': "Nicandra's", 'is_closed': False, 'review_count': 154, 'location': {'address3': None, 'display_address': ['264 Irving Ave', 'Brooklyn, NY 11237'], 'address1': '264 Irving Ave', 'state': 'NY', 'city': 'Brooklyn', 'address2': '', 'country': 'US', 'zip_code': '11237'}, 'rating': 4.5, 'coordinates': {'longitude': -73.915939, 'latitude': 40.69962}, 'alias': 'nicandras-brooklyn', 'price': '$$'}, {'display_phone': '(718) 366-3090', 'distance': 5731.450254368031, 'url': 'https://www.yelp.com/biz/maite-brooklyn?adjust_creative=VgYdbrJG3V8WxnE29HVmwQ&utm_campaign=yelp_api_v3&utm_medium=api_v3_business_search&utm_source=VgYdbrJG3V8WxnE29HVmwQ', 'transactions': [], 'phone': '+17183663090', 'id': 'Om6KGbN524K6pu9IkPT0Rg', 'image_url': 'https://s3-media2.fl.yelpcdn.com/bphoto/qJzGJFbCyrVu-v2SjnCLhQ/o.jpg', 'categories': [{'title': 'Bars', 'alias': 'bars'}, {'title': 'American (New)', 'alias': 'newamerican'}, {'title': 'Spanish', 'alias': 'spanish'}], 'name': 'Maite', 'is_closed': False, 'review_count': 167, 'location': {'address3': '', 'display_address': ['159 Central Ave', 'Brooklyn, NY 11221'], 'address1': '159 Central Ave', 'state': 'NY', 'city': 'Brooklyn', 'address2': '', 'country': 'US', 'zip_code': '11221'}, 'rating': 4.5, 'coordinates': {'longitude': -73.926797, 'latitude': 40.69924}, 'alias': 'maite-brooklyn', 'price': '$$'}, {'display_phone': '(718) 576-3095', 'distance': 3776.4789584058713, 'url': 'https://www.yelp.com/biz/lilia-brooklyn?adjust_creative=VgYdbrJG3V8WxnE29HVmwQ&utm_campaign=yelp_api_v3&utm_medium=api_v3_business_search&utm_source=VgYdbrJG3V8WxnE29HVmwQ', 'transactions': [], 'phone': '+17185763095', 'id': 'zwOAiVT4pAmpNGXzj-t5MA', 'image_url': 'https://s3-media2.fl.yelpcdn.com/bphoto/_1vriTFZRX8uNgAX0oeWLQ/o.jpg', 'categories': [{'title': 'Italian', 'alias': 'italian'}, {'title': 'Cocktail Bars', 'alias': 'cocktailbars'}], 'name': 'Lilia', 'is_closed': False, 'review_count': 634, 'location': {'address3': '', 'display_address': ['567 Union Ave', 'Brooklyn, NY 11211'], 'address1': '567 Union Ave', 'state': 'NY', 'city': 'Brooklyn', 'address2': '', 'country': 'US', 'zip_code': '11211'}, 'rating': 4.0, 'coordinates': {'longitude': -73.95236, 'latitude': 40.71757}, 'alias': 'lilia-brooklyn', 'price': '$$$'}, {'display_phone': '(347) 566-3262', 'distance': 2494.8001205883406, 'url': 'https://www.yelp.com/biz/misi-brooklyn?adjust_creative=VgYdbrJG3V8WxnE29HVmwQ&utm_campaign=yelp_api_v3&utm_medium=api_v3_business_search&utm_source=VgYdbrJG3V8WxnE29HVmwQ', 'transactions': [], 'phone': '+13475663262', 'id': '5k_jwjhdFMPUNWhouGNzuA', 'image_url': 'https://s3-media2.fl.yelpcdn.com/bphoto/ZyF_vnlFxvC2xlbpWRah8A/o.jpg', 'categories': [{'title': 'Italian', 'alias': 'italian'}], 'name': 'Misi', 'is_closed': False, 'review_count': 115, 'location': {'address3': None, 'display_address': ['329 Kent Ave', 'Brooklyn, NY 11249'], 'address1': '329 Kent Ave', 'state': 'NY', 'city': 'Brooklyn', 'address2': '', 'country': 'US', 'zip_code': '11249'}, 'rating': 4.0, 'coordinates': {'longitude': -73.96662, 'latitude': 40.71341}, 'alias': 'misi-brooklyn'}, {'display_phone': '(212) 691-0555', 'distance': 4405.069418725455, 'url': 'https://www.yelp.com/biz/scarpetta-new-york?adjust_creative=VgYdbrJG3V8WxnE29HVmwQ&utm_campaign=yelp_api_v3&utm_medium=api_v3_business_search&utm_source=VgYdbrJG3V8WxnE29HVmwQ', 'transactions': [], 'phone': '+12126910555', 'id': 'raqwXUBlnc0e8c7CYmxEJQ', 'image_url': 'https://s3-media1.fl.yelpcdn.com/bphoto/MuSpWrm8AmcalPlKf9gBQg/o.jpg', 'categories': [{'title': 'Italian', 'alias': 'italian'}], 'name': 'Scarpetta', 'is_closed': False, 'review_count': 1774, 'location': {'address3': '', 'display_address': ['88 Madison Ave', 'New York, NY 10016'], 'address1': '88 Madison Ave', 'state': 'NY', 'city': 'New York', 'address2': '', 'country': 'US', 'zip_code': '10016'}, 'rating': 4.0, 'coordinates': {'longitude': -73.9856, 'latitude': 40.744509}, 'alias': 'scarpetta-new-york', 'price': '$$$'}, {'display_phone': '(718) 436-5449', 'distance': 7070.268192985788, 'url': 'https://www.yelp.com/biz/faros-restaurant-brooklyn?adjust_creative=VgYdbrJG3V8WxnE29HVmwQ&utm_campaign=yelp_api_v3&utm_medium=api_v3_business_search&utm_source=VgYdbrJG3V8WxnE29HVmwQ', 'transactions': [], 'phone': '+17184365449', 'id': 'znyS7zjMK59p8b2fIrG77g', 'image_url': 'https://s3-media2.fl.yelpcdn.com/bphoto/mr_X5ssZu_qmWKYu8vSiGg/o.jpg', 'categories': [{'title': 'Diners', 'alias': 'diners'}], 'name': 'Faros Restaurant', 'is_closed': False, 'review_count': 51, 'location': {'address3': '', 'display_address': ['95 Church Ave', 'Brooklyn, NY 11218'], 'address1': '95 Church Ave', 'state': 'NY', 'city': 'Brooklyn', 'address2': '', 'country': 'US', 'zip_code': '11218'}, 'rating': 3.5, 'coordinates': {'longitude': -73.97981, 'latitude': 40.6428}, 'alias': 'faros-restaurant-brooklyn', 'price': '$'}, {'display_phone': '(929) 250-2875', 'distance': 4237.207558829539, 'url': 'https://www.yelp.com/biz/ammazzacaff%C3%A8-brooklyn?adjust_creative=VgYdbrJG3V8WxnE29HVmwQ&utm_campaign=yelp_api_v3&utm_medium=api_v3_business_search&utm_source=VgYdbrJG3V8WxnE29HVmwQ', 'transactions': ['delivery', 'pickup'], 'phone': '+19292502875', 'id': 'eMSTTuOUlKEnSOr8lPp3Xg', 'image_url': 'https://s3-media4.fl.yelpcdn.com/bphoto/gMgcqyRKiu7KgRaHlvP3QQ/o.jpg', 'categories': [{'title': 'Cocktail Bars', 'alias': 'cocktailbars'}, {'title': 'Italian', 'alias': 'italian'}, {'title': 'Wine Bars', 'alias': 'wine_bars'}], 'name': 'Ammazzacaffè', 'is_closed': False, 'review_count': 117, 'location': {'address3': '', 'display_address': ['702 Grand St', 'Brooklyn, NY 11211'], 'address1': '702 Grand St', 'state': 'NY', 'city': 'Brooklyn', 'address2': None, 'country': 'US', 'zip_code': '11211'}, 'rating': 4.5, 'coordinates': {'longitude': -73.9446243, 'latitude': 40.7113172}, 'alias': 'ammazzacaffè-brooklyn', 'price': '$$'}, {'display_phone': '(718) 233-2566', 'distance': 5125.54985977575, 'url': 'https://www.yelp.com/biz/fitzcarraldo-brooklyn?adjust_creative=VgYdbrJG3V8WxnE29HVmwQ&utm_campaign=yelp_api_v3&utm_medium=api_v3_business_search&utm_source=VgYdbrJG3V8WxnE29HVmwQ', 'transactions': [], 'phone': '+17182332566', 'id': 'Z6koXxi6wgNKcZdsV7dDRw', 'image_url': 'https://s3-media2.fl.yelpcdn.com/bphoto/lIZWozAYoUTlUjPKMqjS_A/o.jpg', 'categories': [{'title': 'Bars', 'alias': 'bars'}, {'title': 'Venues & Event Spaces', 'alias': 'venues'}, {'title': 'Jazz & Blues', 'alias': 'jazzandblues'}], 'name': 'Fitzcarraldo', 'is_closed': False, 'review_count': 59, 'location': {'address3': '', 'display_address': ['195 Morgan Ave', 'Brooklyn, NY 11237'], 'address1': '195 Morgan Ave', 'state': 'NY', 'city': 'Brooklyn', 'address2': '', 'country': 'US', 'zip_code': '11237'}, 'rating': 4.5, 'coordinates': {'longitude': -73.9339077162264, 'latitude': 40.7108712798929}, 'alias': 'fitzcarraldo-brooklyn', 'price': '$$'}, {'display_phone': '(212) 255-1962', 'distance': 3182.96527795133, 'url': 'https://www.yelp.com/biz/via-carota-new-york?adjust_creative=VgYdbrJG3V8WxnE29HVmwQ&utm_campaign=yelp_api_v3&utm_medium=api_v3_business_search&utm_source=VgYdbrJG3V8WxnE29HVmwQ', 'transactions': [], 'phone': '+12122551962', 'id': 'jnHbdsqlTKlPcmJ8BCP9-g', 'image_url': 'https://s3-media3.fl.yelpcdn.com/bphoto/2IdD6r2be65vtSNqUF6fZQ/o.jpg', 'categories': [{'title': 'Italian', 'alias': 'italian'}], 'name': 'Via Carota', 'is_closed': False, 'review_count': 361, 'location': {'address3': '', 'display_address': ['51 Grove St', 'New York, NY 10014'], 'address1': '51 Grove St', 'state': 'NY', 'city': 'New York', 'address2': '', 'country': 'US', 'zip_code': '10014'}, 'rating': 4.0, 'coordinates': {'longitude': -74.00369, 'latitude': 40.7331}, 'alias': 'via-carota-new-york', 'price': '$$$'}, {'display_phone': '(718) 628-1927', 'distance': 6084.319713624871, 'url': 'https://www.yelp.com/biz/union-pizza-works-brooklyn?adjust_creative=VgYdbrJG3V8WxnE29HVmwQ&utm_campaign=yelp_api_v3&utm_medium=api_v3_business_search&utm_source=VgYdbrJG3V8WxnE29HVmwQ', 'transactions': ['delivery', 'pickup'], 'phone': '+17186281927', 'id': 'mYQMjrtHp8vsEKKNsRz1XA', 'image_url': 'https://s3-media3.fl.yelpcdn.com/bphoto/4x-6SRdiSNlC3OCFLikUGQ/o.jpg', 'categories': [{'title': 'Italian', 'alias': 'italian'}, {'title': 'Pizza', 'alias': 'pizza'}], 'name': 'Union Pizza Works', 'is_closed': False, 'review_count': 222, 'location': {'address3': '', 'display_address': ['423 Troutman St', 'Brooklyn, NY 11237'], 'address1': '423 Troutman St', 'state': 'NY', 'city': 'Brooklyn', 'address2': '', 'country': 'US', 'zip_code': '11237'}, 'rating': 4.0, 'coordinates': {'longitude': -73.922154, 'latitude': 40.7073067}, 'alias': 'union-pizza-works-brooklyn', 'price': '$$'}, {'display_phone': '(212) 777-0303', 'distance': 3013.756015058358, 'url': 'https://www.yelp.com/biz/babbo-new-york?adjust_creative=VgYdbrJG3V8WxnE29HVmwQ&utm_campaign=yelp_api_v3&utm_medium=api_v3_business_search&utm_source=VgYdbrJG3V8WxnE29HVmwQ', 'transactions': [], 'phone': '+12127770303', 'id': '-hUvO0C0A-pGZdiSKvjoFw', 'image_url': 'https://s3-media4.fl.yelpcdn.com/bphoto/3f8LU-SMCYubyh5_e1QOCg/o.jpg', 'categories': [{'title': 'Italian', 'alias': 'italian'}], 'name': 'Babbo', 'is_closed': False, 'review_count': 2323, 'location': {'address3': '', 'display_address': ['110 Waverly Pl', 'New York, NY 10011'], 'address1': '110 Waverly Pl', 'state': 'NY', 'city': 'New York', 'address2': '', 'country': 'US', 'zip_code': '10011'}, 'rating': 4.0, 'coordinates': {'longitude': -73.999284, 'latitude': 40.732283}, 'alias': 'babbo-new-york', 'price': '$$$$'}, {'display_phone': '(212) 686-1006', 'distance': 4087.7578890318396, 'url': 'https://www.yelp.com/biz/upland-new-york?adjust_creative=VgYdbrJG3V8WxnE29HVmwQ&utm_campaign=yelp_api_v3&utm_medium=api_v3_business_search&utm_source=VgYdbrJG3V8WxnE29HVmwQ', 'transactions': [], 'phone': '+12126861006', 'id': 'xkvv0n7jbl4Ra3Vm_jfxaA', 'image_url': 'https://s3-media4.fl.yelpcdn.com/bphoto/8phn-1Xcrg2DdIlH8rodfQ/o.jpg', 'categories': [{'title': 'American (New)', 'alias': 'newamerican'}, {'title': 'Burgers', 'alias': 'burgers'}], 'name': 'Upland', 'is_closed': False, 'review_count': 877, 'location': {'address3': '', 'display_address': ['345 Park Ave S', 'New York, NY 10010'], 'address1': '345 Park Ave S', 'state': 'NY', 'city': 'New York', 'address2': '', 'country': 'US', 'zip_code': '10010'}, 'rating': 4.0, 'coordinates': {'longitude': -73.98503, 'latitude': 40.74171}, 'alias': 'upland-new-york', 'price': '$$$'}, {'display_phone': '(212) 388-1831', 'distance': 3070.1916616433896, 'url': 'https://www.yelp.com/biz/loring-place-new-york-2?adjust_creative=VgYdbrJG3V8WxnE29HVmwQ&utm_campaign=yelp_api_v3&utm_medium=api_v3_business_search&utm_source=VgYdbrJG3V8WxnE29HVmwQ', 'transactions': [], 'phone': '+12123881831', 'id': 'AKHA6ZU8uM3vmLwH2hqH_A', 'image_url': 'https://s3-media2.fl.yelpcdn.com/bphoto/d4AZsCm7FWzlV_Enqcg-0w/o.jpg', 'categories': [{'title': 'American (New)', 'alias': 'newamerican'}], 'name': 'Loring Place', 'is_closed': False, 'review_count': 317, 'location': {'address3': None, 'display_address': ['21 W 8th St', 'New York, NY 10011'], 'address1': '21 W 8th St', 'state': 'NY', 'city': 'New York', 'address2': '', 'country': 'US', 'zip_code': '10011'}, 'rating': 4.5, 'coordinates': {'longitude': -73.99754, 'latitude': 40.73299}, 'alias': 'loring-place-new-york-2', 'price': '$$$'}, {'display_phone': '(212) 334-6400', 'distance': 2234.7880570168304, 'url': 'https://www.yelp.com/biz/gato-new-york?adjust_creative=VgYdbrJG3V8WxnE29HVmwQ&utm_campaign=yelp_api_v3&utm_medium=api_v3_business_search&utm_source=VgYdbrJG3V8WxnE29HVmwQ', 'transactions': [], 'phone': '+12123346400', 'id': 'Ve9eysLcTjGLbKp7tjOd9w', 'image_url': 'https://s3-media2.fl.yelpcdn.com/bphoto/NWHVn1YjJJWxJOvyge13JA/o.jpg', 'categories': [{'title': 'Mediterranean', 'alias': 'mediterranean'}, {'title': 'Spanish', 'alias': 'spanish'}, {'title': 'Bars', 'alias': 'bars'}], 'name': 'Gato', 'is_closed': False, 'review_count': 1056, 'location': {'address3': '', 'display_address': ['324 Lafayette St', 'New York, NY 10012'], 'address1': '324 Lafayette St', 'state': 'NY', 'city': 'New York', 'address2': '', 'country': 'US', 'zip_code': '10012'}, 'rating': 4.0, 'coordinates': {'longitude': -73.9951947, 'latitude': 40.7255312}, 'alias': 'gato-new-york', 'price': '$$$'}, {'display_phone': '(347) 987-3747', 'distance': 4027.308250680752, 'url': 'https://www.yelp.com/biz/paulie-gees-brooklyn?adjust_creative=VgYdbrJG3V8WxnE29HVmwQ&utm_campaign=yelp_api_v3&utm_medium=api_v3_business_search&utm_source=VgYdbrJG3V8WxnE29HVmwQ', 'transactions': [], 'phone': '+13479873747', 'id': 'pGr5QuQU7Ur5GHLvXbT8bw', 'image_url': 'https://s3-media2.fl.yelpcdn.com/bphoto/1j39J4NABK_RBtO-l90QNg/o.jpg', 'categories': [{'title': 'Pizza', 'alias': 'pizza'}, {'title': 'Vegan', 'alias': 'vegan'}, {'title': 'Italian', 'alias': 'italian'}], 'name': "Paulie Gee's", 'is_closed': False, 'review_count': 1158, 'location': {'address3': '', 'display_address': ['60 Greenpoint Ave', 'Brooklyn, NY 11222'], 'address1': '60 Greenpoint Ave', 'state': 'NY', 'city': 'Brooklyn', 'address2': '', 'country': 'US', 'zip_code': '11222'}, 'rating': 4.5, 'coordinates': {'longitude': -73.958568, 'latitude': 40.729546}, 'alias': 'paulie-gees-brooklyn', 'price': '$$'}, {'display_phone': '(212) 410-5588', 'distance': 9064.040283352153, 'url': 'https://www.yelp.com/biz/siena-cafe-new-york-3?adjust_creative=VgYdbrJG3V8WxnE29HVmwQ&utm_campaign=yelp_api_v3&utm_medium=api_v3_business_search&utm_source=VgYdbrJG3V8WxnE29HVmwQ', 'transactions': ['delivery', 'pickup'], 'phone': '+12124105588', 'id': 'HSKcCmRFqzqG542Hy_eftw', 'image_url': 'https://s3-media2.fl.yelpcdn.com/bphoto/qCuqcfzOa5U_dssr1Sko7w/o.jpg', 'categories': [{'title': 'Italian', 'alias': 'italian'}, {'title': 'Bars', 'alias': 'bars'}, {'title': 'Cafes', 'alias': 'cafes'}], 'name': 'Siena Cafe', 'is_closed': False, 'review_count': 151, 'location': {'address3': None, 'display_address': ['1580 3rd Ave', 'New York, NY 10128'], 'address1': '1580 3rd Ave', 'state': 'NY', 'city': 'New York', 'address2': '', 'country': 'US', 'zip_code': '10128'}, 'rating': 3.5, 'coordinates': {'longitude': -73.953, 'latitude': 40.78073}, 'alias': 'siena-cafe-new-york-3', 'price': '$$'}, {'display_phone': '', 'distance': 1758.632141997697, 'url': 'https://www.yelp.com/biz/gran-tivoli-new-york-2?adjust_creative=VgYdbrJG3V8WxnE29HVmwQ&utm_campaign=yelp_api_v3&utm_medium=api_v3_business_search&utm_source=VgYdbrJG3V8WxnE29HVmwQ', 'transactions': [], 'phone': '', 'id': '5EmZzIWxYCrc1KOnbA78-w', 'image_url': 'https://s3-media1.fl.yelpcdn.com/bphoto/nSJy3KASh1mH0nzSIGy2hw/o.jpg', 'categories': [{'title': 'Bars', 'alias': 'bars'}, {'title': 'Italian', 'alias': 'italian'}], 'name': 'Gran Tivoli', 'is_closed': False, 'review_count': 12, 'location': {'address3': None, 'display_address': ['406 Broome St', 'New York, NY 10013'], 'address1': '406 Broome St', 'state': 'NY', 'city': 'New York', 'address2': '', 'country': 'US', 'zip_code': '10013'}, 'rating': 4.5, 'coordinates': {'longitude': -73.99783, 'latitude': 40.72104}, 'alias': 'gran-tivoli-new-york-2'}, {'display_phone': '(212) 727-7900', 'distance': 4101.615140742381, 'url': 'https://www.yelp.com/biz/the-wild-son-new-york?adjust_creative=VgYdbrJG3V8WxnE29HVmwQ&utm_campaign=yelp_api_v3&utm_medium=api_v3_business_search&utm_source=VgYdbrJG3V8WxnE29HVmwQ', 'transactions': [], 'phone': '+12127277900', 'id': 'N5UY113nNpeKdLPv0cbMjQ', 'image_url': 'https://s3-media3.fl.yelpcdn.com/bphoto/DYgwqPcb39ihBl9dw-rpqg/o.jpg', 'categories': [{'title': 'American (New)', 'alias': 'newamerican'}, {'title': 'Cocktail Bars', 'alias': 'cocktailbars'}, {'title': 'Breakfast & Brunch', 'alias': 'breakfast_brunch'}], 'name': 'The Wild Son', 'is_closed': False, 'review_count': 389, 'location': {'address3': None, 'display_address': ['53 Little W 12th St', 'New York, NY 10014'], 'address1': '53 Little W 12th St', 'state': 'NY', 'city': 'New York', 'address2': '', 'country': 'US', 'zip_code': '10014'}, 'rating': 4.5, 'coordinates': {'longitude': -74.00836, 'latitude': 40.74073}, 'alias': 'the-wild-son-new-york', 'price': '$$'}]}


## Tests for get_restaurant, get_better_restaurants

def test_get_restaurant(requests_mock):
    requests_mock.get('https://api.yelp.com/v3/businesses/search?term=faro&location=nyc', json=yelp_response, status_code=200)

    response = get_restaurant('faro','nyc')

    restaurant_attrs = ['name', 'image_url', 'price', 'categories','address','id', 'request_duration']

    for restaurant_attr in restaurant_attrs:
        assert restaurant_attr in response


def test_get_better_restaurants(requests_mock):

    requests_mock.get('https://api.yelp.com/v3/businesses/search?radius=800&location=123+Fake+Street&categories=italian&price=2%2C+3%2C+4&limit=5&sort_by=rating', json=yelp_response, status_code=200)


    search_results = {
            "name": "Faro",
            "address": "123 Fake Street",
            "image_url": "www.image.com",
            "id": "12345",
            "categories": [{'title': 'Italian', 'alias': 'italian'}],
            "price": "$$$"
        }
    response = get_better_restaurants(search_results)

    restaurant_attrs = ['name', 'image_url', 'price', 'categories','address','id', 'request_duration']

    for restaurant in response:
        for restaurant_attr in restaurant:
            assert restaurant_attr in restaurant_attrs
